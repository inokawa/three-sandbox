(self.webpackChunkweb3d_sandbox=self.webpackChunkweb3d_sandbox||[]).push([[75],{"./src/three.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DynamicGeometry:()=>DynamicGeometry,ProceduralGeometry:()=>ProceduralGeometry,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),three__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/three/build/three.module.js"),noisejs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/noisejs/index.js"),_utils_threejs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/threejs.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Three"},DynamicGeometry=()=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{const noise=new noisejs__WEBPACK_IMPORTED_MODULE_1__.Noise(Math.random()),sphere=new three__WEBPACK_IMPORTED_MODULE_3__.Kj0(new three__WEBPACK_IMPORTED_MODULE_3__.xo$(1,128,128),new three__WEBPACK_IMPORTED_MODULE_3__.RSm),camera=new three__WEBPACK_IMPORTED_MODULE_3__.cPb(45,window.innerWidth/window.innerHeight);camera.position.z=10;const dispose=(0,_utils_threejs__WEBPACK_IMPORTED_MODULE_2__.S1)(ref.current,sphere,camera,(render=>{const time=.001*performance.now(),positions=sphere.geometry.attributes.position.array;for(let i=0;i<positions.length;i++){const p=new three__WEBPACK_IMPORTED_MODULE_3__.Pa4(positions[3*i],positions[3*i+1],positions[3*i+2]);p.normalize().multiplyScalar(1+.3*noise.perlin3(2*p.x+time,2*p.y,2*p.z)),positions[3*i]=p.x,positions[3*i+1]=p.y,positions[3*i+2]=p.z}sphere.geometry.attributes.position.needsUpdate=!0,sphere.geometry.computeVertexNormals(),render()}));return()=>{dispose()}}),[]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref})},ProceduralGeometry=()=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{const noise=new noisejs__WEBPACK_IMPORTED_MODULE_1__.Noise(Math.random()),geometry=new three__WEBPACK_IMPORTED_MODULE_3__.u9r,vertices=[],indices=[],makeQuad=verts=>{const index1=vertices.length/3-1,index2=index1-1,index3=index1-verts,index4=index1-verts-1;indices.push(index2,index3,index1),indices.push(index2,index4,index3)};for(let i=0;i<=100;i++)for(let j=0;j<=100;j++){const z=10*j,x=10*i,addFace=i>0&&j>0;vertices.push(10*i+10*(Math.random()-.5),10*noise.perlin3(x,z,.3),10*j+10*(Math.random()-.5)),addFace&&makeQuad(101)}geometry.setAttribute("position",new three__WEBPACK_IMPORTED_MODULE_3__.TlE(new Float32Array(vertices),3)),geometry.setIndex(indices);const mesh=new three__WEBPACK_IMPORTED_MODULE_3__.Kj0(geometry,new three__WEBPACK_IMPORTED_MODULE_3__.vBJ({color:"white",wireframe:!0})),camera=new three__WEBPACK_IMPORTED_MODULE_3__.cPb(45,window.innerWidth/window.innerHeight);camera.position.x=1e3,camera.position.z=1e3;const dispose=(0,_utils_threejs__WEBPACK_IMPORTED_MODULE_2__.S1)(ref.current,mesh,camera,(render=>{render()}));return()=>{dispose()}}),[]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref})},__namedExportsOrder=["DynamicGeometry","ProceduralGeometry"]},"./node_modules/noisejs/index.js":module=>{!function(global){function Noise(seed){function Grad(x,y,z){this.x=x,this.y=y,this.z=z}Grad.prototype.dot2=function(x,y){return this.x*x+this.y*y},Grad.prototype.dot3=function(x,y,z){return this.x*x+this.y*y+this.z*z},this.grad3=[new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)],this.p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.perm=new Array(512),this.gradP=new Array(512),this.seed(seed||0)}Noise.prototype.seed=function(seed){seed>0&&seed<1&&(seed*=65536),(seed=Math.floor(seed))<256&&(seed|=seed<<8);for(var p=this.p,i=0;i<256;i++){var v;v=1&i?p[i]^255&seed:p[i]^seed>>8&255;var perm=this.perm,gradP=this.gradP;perm[i]=perm[i+256]=v,gradP[i]=gradP[i+256]=this.grad3[v%12]}};var F2=.5*(Math.sqrt(3)-1),G2=(3-Math.sqrt(3))/6,G3=1/6;function fade(t){return t*t*t*(t*(6*t-15)+10)}function lerp(a,b,t){return(1-t)*a+t*b}Noise.prototype.simplex2=function(xin,yin){var i1,j1,s=(xin+yin)*F2,i=Math.floor(xin+s),j=Math.floor(yin+s),t=(i+j)*G2,x0=xin-i+t,y0=yin-j+t;x0>y0?(i1=1,j1=0):(i1=0,j1=1);var x1=x0-i1+G2,y1=y0-j1+G2,x2=x0-1+2*G2,y2=y0-1+2*G2;i&=255,j&=255;var perm=this.perm,gradP=this.gradP,gi0=gradP[i+perm[j]],gi1=gradP[i+i1+perm[j+j1]],gi2=gradP[i+1+perm[j+1]],t0=.5-x0*x0-y0*y0,t1=.5-x1*x1-y1*y1,t2=.5-x2*x2-y2*y2;return 70*((t0<0?0:(t0*=t0)*t0*gi0.dot2(x0,y0))+(t1<0?0:(t1*=t1)*t1*gi1.dot2(x1,y1))+(t2<0?0:(t2*=t2)*t2*gi2.dot2(x2,y2)))},Noise.prototype.simplex3=function(xin,yin,zin){var i1,j1,k1,i2,j2,k2,s=.3333333333333333*(xin+yin+zin),i=Math.floor(xin+s),j=Math.floor(yin+s),k=Math.floor(zin+s),t=(i+j+k)*G3,x0=xin-i+t,y0=yin-j+t,z0=zin-k+t;x0>=y0?y0>=z0?(i1=1,j1=0,k1=0,i2=1,j2=1,k2=0):x0>=z0?(i1=1,j1=0,k1=0,i2=1,j2=0,k2=1):(i1=0,j1=0,k1=1,i2=1,j2=0,k2=1):y0<z0?(i1=0,j1=0,k1=1,i2=0,j2=1,k2=1):x0<z0?(i1=0,j1=1,k1=0,i2=0,j2=1,k2=1):(i1=0,j1=1,k1=0,i2=1,j2=1,k2=0);var x1=x0-i1+G3,y1=y0-j1+G3,z1=z0-k1+G3,x2=x0-i2+2*G3,y2=y0-j2+2*G3,z2=z0-k2+2*G3,x3=x0-1+.5,y3=y0-1+.5,z3=z0-1+.5;i&=255,j&=255,k&=255;var perm=this.perm,gradP=this.gradP,gi0=gradP[i+perm[j+perm[k]]],gi1=gradP[i+i1+perm[j+j1+perm[k+k1]]],gi2=gradP[i+i2+perm[j+j2+perm[k+k2]]],gi3=gradP[i+1+perm[j+1+perm[k+1]]],t0=.5-x0*x0-y0*y0-z0*z0,t1=.5-x1*x1-y1*y1-z1*z1,t2=.5-x2*x2-y2*y2-z2*z2,t3=.5-x3*x3-y3*y3-z3*z3;return 32*((t0<0?0:(t0*=t0)*t0*gi0.dot3(x0,y0,z0))+(t1<0?0:(t1*=t1)*t1*gi1.dot3(x1,y1,z1))+(t2<0?0:(t2*=t2)*t2*gi2.dot3(x2,y2,z2))+(t3<0?0:(t3*=t3)*t3*gi3.dot3(x3,y3,z3)))},Noise.prototype.perlin2=function(x,y){var X=Math.floor(x),Y=Math.floor(y);x-=X,y-=Y,X&=255,Y&=255;var perm=this.perm,gradP=this.gradP,n00=gradP[X+perm[Y]].dot2(x,y),n01=gradP[X+perm[Y+1]].dot2(x,y-1),n10=gradP[X+1+perm[Y]].dot2(x-1,y),n11=gradP[X+1+perm[Y+1]].dot2(x-1,y-1),u=fade(x);return lerp(lerp(n00,n10,u),lerp(n01,n11,u),fade(y))},Noise.prototype.perlin3=function(x,y,z){var X=Math.floor(x),Y=Math.floor(y),Z=Math.floor(z);x-=X,y-=Y,z-=Z,X&=255,Y&=255,Z&=255;var perm=this.perm,gradP=this.gradP,n000=gradP[X+perm[Y+perm[Z]]].dot3(x,y,z),n001=gradP[X+perm[Y+perm[Z+1]]].dot3(x,y,z-1),n010=gradP[X+perm[Y+1+perm[Z]]].dot3(x,y-1,z),n011=gradP[X+perm[Y+1+perm[Z+1]]].dot3(x,y-1,z-1),n100=gradP[X+1+perm[Y+perm[Z]]].dot3(x-1,y,z),n101=gradP[X+1+perm[Y+perm[Z+1]]].dot3(x-1,y,z-1),n110=gradP[X+1+perm[Y+1+perm[Z]]].dot3(x-1,y-1,z),n111=gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1,y-1,z-1),u=fade(x),v=fade(y),w=fade(z);return lerp(lerp(lerp(n000,n100,u),lerp(n001,n101,u),w),lerp(lerp(n010,n110,u),lerp(n011,n111,u),w),v)},global.Noise=Noise}(module.exports)},"./src/utils/threejs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S1:()=>init,cF:()=>initPostprocess});var three_module=__webpack_require__("./node_modules/three/build/three.module.js"),OrbitControls=__webpack_require__("./node_modules/three/examples/jsm/controls/OrbitControls.js"),EffectComposer=__webpack_require__("./node_modules/three/examples/jsm/postprocessing/EffectComposer.js"),RenderPass=__webpack_require__("./node_modules/three/examples/jsm/postprocessing/RenderPass.js"),ShaderPass=__webpack_require__("./node_modules/three/examples/jsm/postprocessing/ShaderPass.js");const default_namespaceObject="varying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",frag_default_namespaceObject="varying vec2 vUv;\nuniform sampler2D tDiffuse;\nvoid main() {\n  vec4 color = texture2D(tDiffuse, vUv);\n  gl_FragColor = color;\n}\n",createManyMesh=()=>{const geometry=new three_module.DvJ(10,10,10),object=new three_module.Tme;for(let i=0;i<100;i++){const material=new three_module.RSm,mesh=new three_module.Kj0(geometry,material);mesh.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),mesh.position.multiplyScalar(100*Math.random()),mesh.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),object.add(mesh)}return object};function init(elem,mesh,camera,render){const renderer=new three_module.CP7;renderer.setSize(window.innerWidth,window.innerHeight),renderer.setPixelRatio(window.devicePixelRatio);const scene=new three_module.xsS;scene.add(mesh);new OrbitControls.z(camera,renderer.domElement);elem.appendChild(renderer.domElement);let end=!1;return function animate(){end||(requestAnimationFrame(animate),render((()=>{renderer.render(scene,camera)})))}(),()=>{end=!0,scene.remove(mesh),dispose(mesh)}}function initPostprocess(elem,{uniforms,frag,vert}={}){const camera=new three_module.cPb(70,window.innerWidth/window.innerHeight,.01,1e3);camera.position.z=100;const scene=new three_module.xsS,mesh=createManyMesh();scene.add(mesh);const renderer=new three_module.CP7({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight);const composer=new EffectComposer.x(renderer);composer.addPass(new RenderPass.C(scene,camera));const refUniforms={tDiffuse:{value:null,type:"t"},time:{type:"f",value:0},resolution:{type:"v2",value:new three_module.FM8(window.innerWidth,window.innerHeight)},...uniforms},shader=new three_module.jyz({uniforms:refUniforms,vertexShader:vert||default_namespaceObject,fragmentShader:frag||frag_default_namespaceObject}),effect=new ShaderPass.T(shader);composer.addPass(effect),elem.appendChild(renderer.domElement);let end=!1;return function animate(){end||(requestAnimationFrame(animate),mesh.rotation.x+=.0025,mesh.rotation.y+=.005,composer.render(),refUniforms.time.value+=.05)}(),()=>{end=!0,shader.dispose(),scene.remove(mesh),dispose(mesh)}}function dispose(obj){obj.geometry&&obj.geometry.dispose(),obj.material&&obj.material.dispose(),obj.children.forEach((o=>{dispose(o)}))}}}]);